<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LuckyGroups - Pembagi Kelompok yang Adil</title>
    <link rel="icon" type="image/x-icon" href="/static/favicon.ico">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/feather-icons"></script>
    <script src="https://cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: {
                            50: '#f0f9ff',
                            100: '#e0f2fe',
                            200: '#bae6fd',
                            300: '#7dd3fc',
                            400: '#38bdf8',
                            500: '#0ea5e9',
                            600: '#0284c7',
                            700: '#0369a1',
                            800: '#075985',
                            900: '#0c4a6e'
                        },
                        secondary: {
                            50: '#f0fdf4',
                            100: '#dcfce7',
                            200: '#bbf7d0',
                            300: '#86efac',
                            400: '#4ade80',
                            500: '#22c55e',
                            600: '#16a34a',
                            700: '#15803d',
                            800: '#166534',
                            900: '#14532d'
                        },
                        accent: {
                            50: '#fef7ff',
                            100: '#fceeff',
                            200: '#f8d4fe',
                            300: '#f2abfc',
                            400: '#e879f9',
                            500: '#d946ef',
                            600: '#c026d3',
                            700: '#a21caf',
                            800: '#86198f',
                            900: '#701a75'
                        }
                    }
                }
            }
        }
    </script>
    <style>
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        .spinning {
            animation: spin 1s linear infinite;
        }
        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        .card-hover:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }
        .transition-all {
            transition: all 0.3s ease;
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen font-sans">
    <!-- Navigasi -->
    <nav class="bg-white shadow-sm">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16">
                <div class="flex items-center">
                    <div class="flex-shrink-0 flex items-center">
                        <i data-feather="users" class="text-primary-600 h-8 w-8"></i>
                        <span class="ml-2 text-xl font-bold text-gray-800">LuckyGroups</span>
                    </div>
                </div>
                <div class="hidden sm:ml-6 sm:flex sm:items-center">
                    <button class="px-4 py-2 rounded-md text-sm font-medium text-primary-600 bg-primary-50 hover:bg-primary-100 transition-all">
                        <i data-feather="help-circle" class="mr-2"></i>Cara Kerja
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Bagian Hero -->
    <div class="bg-gradient-to-br from-primary-600 via-primary-700 to-primary-800 text-white">
        <div class="max-w-7xl mx-auto py-8 sm:py-12 px-4 sm:px-6 lg:px-8 text-center">
            <h1 class="text-3xl sm:text-4xl lg:text-5xl xl:text-6xl font-extrabold tracking-tight">
                Pembagian Kelompok
            </h1>
            <p class="mt-4 sm:mt-6 max-w-2xl mx-auto text-lg sm:text-xl text-blue-100">
                Masukkan nama siswa dan judul proyek, biarkan sistem pintar kami membuat kelompok yang benar-benar acak!
            </p>
            <div class="mt-8 sm:mt-10 flex justify-center">
                <div class="rounded-md shadow">
                    <a href="#app" class="w-full flex items-center justify-center px-6 sm:px-8 py-3 border border-transparent text-sm sm:text-base font-medium rounded-lg text-primary-700 bg-white hover:bg-gray-50 shadow-lg hover:shadow-xl sm:py-4 sm:text-lg sm:px-10 transition-all">
                        <i data-feather="arrow-down" class="mr-2 h-4 w-4 sm:h-5 sm:w-5"></i> Mulai Sekarang
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- Aplikasi Utama -->
    <div id="app" class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6 sm:py-12">
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 lg:gap-8">
            <!-- Bagian Input -->
            <div class="bg-white shadow rounded-lg p-4 sm:p-6">
                <h2 class="text-xl sm:text-2xl font-bold text-gray-900 mb-4 sm:mb-6 flex items-center">
                    <i data-feather="upload" class="mr-2 text-primary-600 h-5 w-5 sm:h-6 sm:w-6"></i> Masukkan Data
                </h2>
                
                <div class="mb-4 sm:mb-6">
                    <label class="block text-sm font-medium text-gray-800 mb-2">Jumlah Kelompok</label>
                    <input type="number" id="groupCount" min="2" value="4" class="w-full px-3 sm:px-4 py-2 sm:py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-all text-base">
                </div>
                
                <div class="mb-4 sm:mb-6">
                    <label class="block text-sm font-medium text-gray-800 mb-2">Nama Siswa (Satu per baris)</label>
                    <textarea id="studentsList" rows="6" class="w-full px-3 sm:px-4 py-2 sm:py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-all text-base" placeholder="Ahmad
Budi
Citra
Dina
Eko
..."></textarea>
                </div>
                
                <div class="mb-4 sm:mb-6">
                    <label class="block text-sm font-medium text-gray-800 mb-2">Judul Proyek (Satu per baris)</label>
                    <textarea id="projectsList" rows="6" class="w-full px-3 sm:px-4 py-2 sm:py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-all text-base" placeholder="Proyek Machine Learning
Tantangan Pengembangan Web
Tugas Analisis Data
..."></textarea>
                </div>
                
                <div class="flex flex-col sm:flex-row gap-3 sm:gap-4 sm:justify-between">
                    <button id="randomizeBtn" class="px-6 sm:px-8 py-3 bg-gradient-to-r from-primary-600 to-primary-700 text-white rounded-lg hover:from-primary-700 hover:to-primary-800 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 transition-all flex items-center justify-center shadow-lg hover:shadow-xl text-sm sm:text-base">
                        <i data-feather="shuffle" class="mr-2 h-4 w-4 sm:h-5 sm:w-5"></i> Acak Kelompok
                    </button>
                    <button id="clearBtn" class="px-4 sm:px-6 py-3 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-400 focus:ring-offset-2 transition-all flex items-center justify-center border border-gray-200 text-sm sm:text-base">
                        <i data-feather="trash-2" class="mr-2 h-4 w-4 sm:h-5 sm:w-5"></i> Hapus Semua
                    </button>
                </div>
            </div>
            
            <!-- Bagian Hasil -->
            <div class="bg-white shadow rounded-lg p-4 sm:p-6">
                <h2 class="text-xl sm:text-2xl font-bold text-gray-900 mb-4 sm:mb-6 flex items-center">
                    <i data-feather="package" class="mr-2 text-secondary-600 h-5 w-5 sm:h-6 sm:w-6"></i> Hasil
                </h2>
                
                <div id="resultsContainer" class="space-y-4 sm:space-y-6">
                    <div class="text-center py-8 sm:py-12 text-gray-500">
                        <i data-feather="box" class="h-10 w-10 sm:h-12 sm:w-12 mx-auto mb-4 text-gray-400"></i>
                        <p class="text-base sm:text-lg font-medium">Kelompok acak Anda akan muncul di sini</p>
                    </div>
                </div>
                
                <div class="mt-4 sm:mt-6 hidden" id="resultsActions">
                    <button id="saveBtn" class="w-full sm:w-auto px-6 sm:px-8 py-3 bg-gradient-to-r from-secondary-600 to-secondary-700 text-white rounded-lg hover:from-secondary-700 hover:to-secondary-800 focus:outline-none focus:ring-2 focus:ring-secondary-500 focus:ring-offset-2 transition-all flex items-center justify-center shadow-lg hover:shadow-xl text-sm sm:text-base">
                        <i data-feather="download" class="mr-2 h-4 w-4 sm:h-5 sm:w-5"></i> Simpan Hasil
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Cara Kerja -->
    <div class="bg-gray-100 py-12 sm:py-16">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <h2 class="text-2xl sm:text-3xl font-bold text-center text-gray-900 mb-8 sm:mb-12">
                <i data-feather="info" class="inline mr-2 text-primary-600 h-6 w-6 sm:h-8 sm:w-8"></i> Cara Kerja
            </h2>
            
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 sm:gap-8">
                <div class="bg-white p-4 sm:p-6 rounded-lg shadow-sm card-hover transition-all">
                    <div class="rounded-full bg-primary-50 h-10 w-10 sm:h-12 sm:w-12 flex items-center justify-center mb-3 sm:mb-4">
                        <i data-feather="edit" class="text-primary-600 h-5 w-5 sm:h-6 sm:w-6"></i>
                    </div>
                    <h3 class="text-base sm:text-lg font-medium text-gray-900 mb-2">1. Masukkan Data</h3>
                    <p class="text-sm sm:text-base text-gray-700">Masukkan nama siswa dan judul proyek. Anda bisa copy-paste dari spreadsheet.</p>
                </div>
                
                <div class="bg-white p-4 sm:p-6 rounded-lg shadow-sm card-hover transition-all">
                    <div class="rounded-full bg-primary-50 h-10 w-10 sm:h-12 sm:w-12 flex items-center justify-center mb-3 sm:mb-4">
                        <i data-feather="shuffle" class="text-primary-600 h-5 w-5 sm:h-6 sm:w-6"></i>
                    </div>
                    <h3 class="text-base sm:text-lg font-medium text-gray-900 mb-2">2. Acak Kelompok</h3>
                    <p class="text-sm sm:text-base text-gray-700">Algoritma kami akan membagi siswa secara adil ke kelompok dan menugaskan proyek secara acak.</p>
                </div>
                
                <div class="bg-white p-4 sm:p-6 rounded-lg shadow-sm card-hover transition-all">
                    <div class="rounded-full bg-primary-50 h-10 w-10 sm:h-12 sm:w-12 flex items-center justify-center mb-3 sm:mb-4">
                        <i data-feather="share-2" class="text-primary-600 h-5 w-5 sm:h-6 sm:w-6"></i>
                    </div>
                    <h3 class="text-base sm:text-lg font-medium text-gray-900 mb-2">3. Bagikan Hasil</h3>
                    <p class="text-sm sm:text-base text-gray-700">Download atau bagikan hasil dengan siswa melalui email atau aplikasi pesan.</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-white border-t border-gray-200">
        <div class="max-w-7xl mx-auto py-12 px-4 sm:px-6 lg:px-8">
            <div class="text-center">
                <p class="text-gray-600 text-sm">
                    Dibuat dengan <i data-feather="heart" class="inline text-red-500 h-4 w-4"></i> Made In Kelas B S2, Angkatan ke 3
                </p>
                <p class="mt-2 text-gray-500 text-xs">
                    <i data-feather="clock" class="inline h-3 w-3"></i> Data tidak disimpan - daftar Anda tetap pribadi
                </p>
            </div>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            feather.replace();
            
            // DOM Elements
            const randomizeBtn = document.getElementById('randomizeBtn');
            const clearBtn = document.getElementById('clearBtn');
            const saveBtn = document.getElementById('saveBtn');
            const studentsList = document.getElementById('studentsList');
            const projectsList = document.getElementById('projectsList');
            const groupCount = document.getElementById('groupCount');
            const resultsContainer = document.getElementById('resultsContainer');
            const resultsActions = document.getElementById('resultsActions');
            
            // Acak Kelompok
            randomizeBtn.addEventListener('click', function() {
                // Ambil nilai input
                const students = studentsList.value.split('\n').filter(s => s.trim() !== '');
                const projects = projectsList.value.split('\n').filter(p => p.trim() !== '');
                const numGroups = parseInt(groupCount.value);
                
                // Validasi input
                if (students.length < numGroups) {
                    Swal.fire({
                        icon: 'error',
                        title: 'Siswa Tidak Cukup',
                        text: `Anda memiliki ${students.length} siswa tetapi ingin ${numGroups} kelompok. Setiap kelompok membutuhkan minimal 1 siswa.`,
                    });
                    return;
                }
                
                if (projects.length < numGroups) {
                    Swal.fire({
                        icon: 'error',
                        title: 'Proyek Tidak Cukup',
                        text: `Anda memiliki ${projects.length} proyek tetapi ingin ${numGroups} kelompok. Setiap kelompok membutuhkan 1 proyek.`,
                    });
                    return;
                }
                
                // Tampilkan loading
                resultsContainer.innerHTML = `
                    <div class="text-center py-8 sm:py-12">
                        <i data-feather="loader" class="h-10 w-10 sm:h-12 sm:w-12 mx-auto mb-4 spinning text-primary-600"></i>
                        <p class="text-base sm:text-lg text-gray-700 font-medium">Mengacak kelompok...</p>
                    </div>
                `;
                feather.replace();
                
                // Simulasi delay pemrosesan
                setTimeout(() => {
                    createRandomGroups(students, projects, numGroups);
                }, 800);
            });
            
            // Hapus Semua
            clearBtn.addEventListener('click', function() {
                studentsList.value = '';
                projectsList.value = '';
                groupCount.value = '4';
                resultsContainer.innerHTML = `
                    <div class="text-center py-8 sm:py-12 text-gray-500">
                        <i data-feather="box" class="h-10 w-10 sm:h-12 sm:w-12 mx-auto mb-4 text-gray-400"></i>
                        <p class="text-base sm:text-lg font-medium">Kelompok acak Anda akan muncul di sini</p>
                    </div>
                `;
                resultsActions.classList.add('hidden');
                feather.replace();
            });
            
            // Simpan Hasil
            saveBtn.addEventListener('click', function() {
                const htmlContent = `
                    <!DOCTYPE html>
                    <html>
                    <head>
                        <title>Kelompok Acak</title>
                        <style>
                            body { font-family: Arial, sans-serif; margin: 20px; }
                            .group { margin-bottom: 30px; border-bottom: 1px solid #eee; padding-bottom: 20px; }
                            h2 { color: #6D28D9; }
                            h3 { color: #10B981; }
                            ul { list-style-type: none; padding-left: 0; }
                            li { padding: 5px 0; }
                        </style>
                    </head>
                    <body>
                        <h1>Hasil Kelompok Acak</h1>
                        <p>Dibuat pada ${new Date().toLocaleString()}</p>
                        ${resultsContainer.innerHTML.replace(/ class="[^"]*"/g, '')}
                    </body>
                    </html>
                `;
                
                const blob = new Blob([htmlContent], { type: 'text/html' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = 'kelompok-acak.html';
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
            });
            
            // Fungsi bantuan untuk membuat kelompok acak
            function createRandomGroups(students, projects, numGroups) {
                // Acak hanya siswa, proyek tetap berurutan
                const shuffledStudents = [...students].sort(() => Math.random() - 0.5);
                const orderedProjects = [...projects];
                
                // Buat kelompok
                const groups = [];
                for (let i = 0; i < numGroups; i++) {
                    groups.push({
                        name: `Kelompok ${i+1}`,
                        project: orderedProjects[i % orderedProjects.length],
                        members: []
                    });
                }
                
                // Hitung distribusi - kelompok pertama mendapat lebih banyak anggota, kelompok terakhir mendapat lebih sedikit
                const studentsPerGroup = Math.floor(students.length / numGroups);
                const remainder = students.length % numGroups;
                
                let studentIndex = 0;
                for (let i = 0; i < numGroups; i++) {
                    // Kelompok pertama mendapat satu siswa tambahan jika ada sisa
                    const groupSize = studentsPerGroup + (i < remainder ? 1 : 0);
                    
                    // Tambahkan siswa ke kelompok ini
                    for (let j = 0; j < groupSize; j++) {
                        groups[i].members.push(shuffledStudents[studentIndex]);
                        studentIndex++;
                    }
                }
                
                // Tampilkan hasil
                displayGroups(groups);
            }
            
            // Fungsi bantuan untuk menampilkan kelompok
            function displayGroups(groups) {
                let html = '';
                
                groups.forEach(group => {
                    html += `
                        <div class="bg-gradient-to-br from-gray-50 to-gray-100 rounded-xl p-4 sm:p-6 fade-in shadow-sm border border-gray-200">
                            <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between mb-3 sm:mb-4 gap-2 sm:gap-0">
                                <h3 class="text-lg sm:text-xl font-bold text-primary-700">${group.name}</h3>
                                <span class="px-3 sm:px-4 py-1 sm:py-2 rounded-full text-xs sm:text-sm font-semibold bg-gradient-to-r from-secondary-100 to-secondary-200 text-secondary-800 border border-secondary-300 self-start sm:self-auto">
                                    ${group.project}
                                </span>
                            </div>
                            <ul class="space-y-2 sm:space-y-3">
                                ${group.members.map(member => `<li class="flex items-center text-gray-800 font-medium text-sm sm:text-base"><i data-feather="user" class="h-3 w-3 sm:h-4 sm:w-4 mr-2 sm:mr-3 text-primary-500 flex-shrink-0"></i> ${member}</li>`).join('')}
                            </ul>
                        </div>
                    `;
                });
                
                resultsContainer.innerHTML = html;
                resultsActions.classList.remove('hidden');
                feather.replace();
                
                // Scroll ke hasil
                document.getElementById('resultsContainer').scrollIntoView({ behavior: 'smooth' });
            }
            
            // Tombol data contoh untuk demo
            document.addEventListener('keydown', function(e) {
                if (e.ctrlKey && e.key === 's') {
                    e.preventDefault();
                    studentsList.value = `Ahmad
Budi
Citra
Dina
Eko
Fajar
Gita
Hadi
Ika
Joko
Kiki
Lina`;
                    projectsList.value = `Proyek Machine Learning
Tantangan Pengembangan Web
Tugas Analisis Data
Penelitian Keamanan Siber
Pengembangan Aplikasi Mobile
Studi Etika AI
Implementasi Cloud Computing`;
                    groupCount.value = '5';
                }
            });
        });
    </script>
</body>
</html>
